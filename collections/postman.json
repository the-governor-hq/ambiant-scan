{
  "info": {
    "name": "Ambiant Scan",
    "description": "Zero-Dependency Environmental Scraper & Modeler — The Governor HQ",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3400",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Scan",
      "description": "Environmental scan endpoints",
      "item": [
        {
          "name": "Scan by Coordinates",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/scan?lat=45.50&lon=-73.57",
              "host": ["{{base_url}}"],
              "path": ["scan"],
              "query": [
                { "key": "lat", "value": "45.50" },
                { "key": "lon", "value": "-73.57" }
              ]
            },
            "description": "Full environmental scan using GPS coordinates"
          }
        },
        {
          "name": "Scan by City — Montreal",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/scan?city=Montreal",
              "host": ["{{base_url}}"],
              "path": ["scan"],
              "query": [
                { "key": "city", "value": "Montreal" }
              ]
            },
            "description": "Full environmental scan using city name"
          }
        },
        {
          "name": "Scan by City — Tokyo",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/scan?city=Tokyo",
              "host": ["{{base_url}}"],
              "path": ["scan"],
              "query": [
                { "key": "city", "value": "Tokyo" }
              ]
            },
            "description": "Example: scan Tokyo"
          }
        },
        {
          "name": "Scan by City — London",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/scan?city=London",
              "host": ["{{base_url}}"],
              "path": ["scan"],
              "query": [
                { "key": "city", "value": "London" }
              ]
            },
            "description": "Example: scan London"
          }
        }
      ]
    },
    {
      "name": "GeoIP",
      "description": "IP-based geolocation",
      "item": [
        {
          "name": "GeoIP — Auto Detect",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/geoip",
              "host": ["{{base_url}}"],
              "path": ["geoip"]
            },
            "description": "Returns caller geolocation based on IP. Uses Fly-Client-IP, X-Forwarded-For, or socket IP."
          }
        },
        {
          "name": "GeoIP — Simulate Fly.io (Montreal)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Fly-Client-IP", "value": "24.48.0.1" }
            ],
            "url": {
              "raw": "{{base_url}}/geoip",
              "host": ["{{base_url}}"],
              "path": ["geoip"]
            },
            "description": "Simulate a Fly.io proxied request with a Canadian IP"
          }
        },
        {
          "name": "GeoIP — Simulate X-Forwarded-For",
          "request": {
            "method": "GET",
            "header": [
              { "key": "X-Forwarded-For", "value": "8.8.8.8, 10.0.0.1" }
            ],
            "url": {
              "raw": "{{base_url}}/geoip",
              "host": ["{{base_url}}"],
              "path": ["geoip"]
            },
            "description": "Simulate multi-hop proxy with X-Forwarded-For (Google DNS IP)"
          }
        }
      ]
    },
    {
      "name": "System",
      "description": "Health, cache, and admin endpoints",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Server health and uptime"
          }
        },
        {
          "name": "Cache Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/cache/stats",
              "host": ["{{base_url}}"],
              "path": ["cache", "stats"]
            },
            "description": "View hit rates and entry counts for all caches"
          }
        },
        {
          "name": "Flush All Caches",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/cache",
              "host": ["{{base_url}}"],
              "path": ["cache"]
            },
            "description": "Clear all cached data (geo, city, environmental, geoip)"
          }
        }
      ]
    }
  ]
}
